(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var r=t(14),o=t.n(r),a=t(3),c=t(2),u=t(0),i=function(e){var n=e.filter,t=e.handleChange;return Object(u.jsxs)("p",{children:["filter shown with ",Object(u.jsx)("input",{value:n,onChange:t})]})},d=function(e){var n=e.addPerson,t=e.newName,r=e.handleNameChange,o=e.newNumber,a=e.handleNumberChange;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:t,onChange:r})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:o,onChange:a})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},s=function(e){return Object(u.jsx)("div",{children:e.persons.map((function(n){return n.name.toLowerCase().includes(e.filter.toLowerCase())?Object(u.jsxs)("p",{children:[n.name," ",n.number," ",Object(u.jsx)("button",{value:n.id,onClick:e.deletePerson,children:"delete"})]},n.name):null}))})},l=t(4),b=t.n(l),h="/api/persons",f={getAll:function(){return b.a.get(h).then((function(e){return e.data}))},addNewPerson:function(e){return b.a.post(h,e).then((function(e){return e.data}))},deletePerson:function(e){return b.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},updatePerson:function(e,n){return b.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))}},j=function(e){var n,t=e.message;return null===t?null:(n=t.includes("Information of")||t.includes("validation")||t.includes("Validation failed")?{backgroundColor:"lightgrey",border:"1px solid red",borderRadius:"5px",color:"red",fontSize:20,fontWeight:700}:{backgroundColor:"lightgrey",border:"1px solid green",borderRadius:"5px",color:"green",fontSize:20,fontWeight:700},Object(u.jsx)("div",{style:n,children:t}))},m=function(){var e=Object(c.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1];Object(c.useEffect)((function(){f.getAll().then((function(e){console.log(e),r(e)})).catch((function(e){return alert(e)}))}),[]);var o=Object(c.useState)(""),l=Object(a.a)(o,2),b=l[0],h=l[1],m=Object(c.useState)(""),p=Object(a.a)(m,2),g=p[0],O=p[1],v=Object(c.useState)(""),x=Object(a.a)(v,2),w=x[0],C=x[1],N=Object(c.useState)(null),P=Object(a.a)(N,2),S=P[0],k=P[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(i,{filter:w,handleChange:function(e){var n=e.target;C(n.value.toLowerCase())}}),Object(u.jsx)("h3",{children:"add a person"}),Object(u.jsx)(j,{message:S}),Object(u.jsx)("br",{}),Object(u.jsx)(d,{newName:b,handleNameChange:function(e){var n=e.target;h(n.value)},newNumber:g,handleNumberChange:function(e){var n=e.target;O(n.value)},addPerson:function(e){e.preventDefault();var n={name:b,number:g},o=t.find((function(e){return e.name===n.name}));if(void 0!==o)return window.confirm("".concat(n.name," is already added to phonebook. Replace the old number with the new one?"))&&f.updatePerson(o.id,n).then((function(e){r(t.map((function(n){return n.id!==o.id?n:e}))),k("Updated ".concat(n.name)),setTimeout((function(){k(null)}),5e3)})).catch((function(e){e.response.data?(console.log(e.response.data),k(e.response.data.error)):k("Information of ".concat(n.name," has already been removed from the server")),setTimeout((function(){k(null)}),5e3)})),null;f.addNewPerson(n).then((function(e){r(t.concat(e)),h(""),O(""),k("Added ".concat(n.name)),setTimeout((function(){k(null)}),5e3)})).catch((function(e){h(""),O(""),k(e.response.data.error),setTimeout((function(){k(null)}),5e3)}))}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(s,{persons:t,filter:w,deletePerson:function(e){var n=t.find((function(n){return n.id.toString()===e.target.value}));return window.confirm("delete ".concat(n.name,"?"))&&f.deletePerson(e.target.value).then(r(t.filter((function(n){return n.id.toString()!==e.target.value})))),null}})]})};o.a.render(Object(u.jsx)(m,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.8d0de0b5.chunk.js.map