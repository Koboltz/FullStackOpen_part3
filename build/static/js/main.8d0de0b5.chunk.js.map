{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Results.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","props","filter","handleChange","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Results","persons","map","person","name","toLowerCase","includes","number","id","onClick","deletePerson","baseUrl","personsService","getAll","axios","get","then","res","data","addNewPerson","personObj","post","delete","updatePerson","newPerson","put","Notification","notificationStyle","message","backgroundColor","border","borderRadius","color","fontSize","fontWeight","style","App","useState","setPersons","useEffect","initialPersons","console","log","catch","err","alert","setNewName","setNewNumber","setFilter","errorMessage","setErrorMessage","target","event","preventDefault","check","find","undefined","window","confirm","newPersons","setTimeout","response","error","concat","toString","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8d0de0b5.chunk.js","sourcesContent":["\r\nconst Filter = (props) => {\r\n    const { filter, handleChange } = props;\r\n    return (\r\n    <p>filter shown with <input value={filter} onChange={handleChange}/></p>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = (props) => {\r\n    const {\r\n        addPerson, newName, \r\n        handleNameChange, newNumber, \r\n        handleNumberChange \r\n    } = props;\r\n\r\n    return (\r\n        <form onSubmit={addPerson}>\r\n            <div>\r\n                name: <input value={newName} onChange={handleNameChange}/>\r\n            </div>\r\n            <div>\r\n                 number: <input value={newNumber} onChange={handleNumberChange} />\r\n            </div>   \r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import React from 'react';\r\n\r\nconst Results = (props) => {\r\n  \r\n    return (\r\n      <div>\r\n        {props.persons.map(person => {\r\n          if (person.name.toLowerCase().includes(props.filter.toLowerCase())){\r\n             // console.log(`person: ${person.id}`)\r\n            return (\r\n              <p key={person.name}>{person.name} {person.number} <button value={person.id} onClick={props.deletePerson}>delete</button></p>\r\n            )\r\n            \r\n          }\r\n          return null;\r\n        })}\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Results","import axios from 'axios';\r\nconst baseUrl = '/api/persons';\r\n\r\nconst getAll = () => {\r\n    const req = axios.get(baseUrl);\r\n    return req.then(res => res.data)\r\n};\r\n\r\nconst addNewPerson = personObj => {\r\n    const req = axios.post(baseUrl, personObj)\r\n    return req.then(res => res.data)\r\n}\r\n\r\nconst deletePerson = id => {\r\n    const req = axios.delete(`${baseUrl}/${id}`)\r\n    return req.then(res => res.data)\r\n}\r\n\r\nconst updatePerson = (id, newPerson) => {\r\n    const req = axios.put(`${baseUrl}/${id}`, newPerson);\r\n    return req.then(res => res.data)\r\n}\r\n\r\nconst personsService = {\r\n    getAll,\r\n    addNewPerson,\r\n    deletePerson,\r\n    updatePerson\r\n}\r\n\r\n\r\nexport default personsService;","\r\n\r\nconst Notification = ({message}) => {\r\n    let notificationStyle;\r\n  //  console.log(message)\r\n    if (message === null) {\r\n        return null\r\n    } else {\r\n        if (!message.includes('Information of') && !message.includes('validation') && !message.includes('Validation failed')) {\r\n           \r\n         notificationStyle = {\r\n            backgroundColor: 'lightgrey',\r\n            border: '1px solid green',\r\n            borderRadius: '5px',\r\n            color: 'green',\r\n            fontSize: 20,\r\n            fontWeight: 700\r\n        }\r\n    } else {\r\n        notificationStyle = {\r\n            backgroundColor: 'lightgrey',\r\n            border: '1px solid red',\r\n            borderRadius: '5px',\r\n            color: 'red',\r\n            fontSize: 20,\r\n            fontWeight: 700\r\n        }\r\n    }\r\n    return (\r\n        <div style={notificationStyle}>\r\n            {message}\r\n        </div>\r\n    )\r\n }\r\n\r\n}\r\nexport default Notification;","import React, { useState, useEffect } from 'react';\r\nimport Filter from './components/Filter';\r\nimport PersonForm from './components/PersonForm';\r\nimport Results from './components/Results';\r\nimport personsService from './services/persons';\r\nimport Notification from './components/Notification';\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([\r\n  ])\r\n\r\n  useEffect(() => {\r\n    \r\n    personsService  \r\n    .getAll()\r\n    .then(initialPersons => {\r\n       console.log(initialPersons)\r\n      setPersons(initialPersons)\r\n    })\r\n    .catch(err => alert(err))\r\n  }, [])\r\n\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filter, setFilter ] = useState(''); \r\n  const [errorMessage, setErrorMessage ] = useState(null)\r\n\r\n  const handleNameChange = ({target}) => {\r\n    setNewName(target.value);\r\n  }\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n    //console.log('button clicked', event.target)\r\n    const personObj  = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    const check = persons.find(person => person.name === personObj.name)\r\n    //console.log(check)\r\n    if (check !== undefined) {\r\n     const result = window.confirm(`${personObj.name} is already added to phonebook. Replace the old number with the new one?`)\r\n     if (result) {\r\n       personsService\r\n        .updatePerson(check.id, personObj)\r\n        .then(newPersons => {\r\n          setPersons(persons.map(person => person.id !== check.id ? person : newPersons))\r\n          setErrorMessage(`Updated ${personObj.name}`)\r\n          setTimeout(() => {\r\n            setErrorMessage (null)\r\n          }, 5000)\r\n        })\r\n        .catch(err => {\r\n          if (!err.response.data) {\r\n          setErrorMessage(`Information of ${personObj.name} has already been removed from the server`)\r\n          } else {\r\n            console.log(err.response.data)\r\n            setErrorMessage(err.response.data.error)\r\n          }\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000)\r\n        })\r\n      }\r\n     return null\r\n    } else {\r\n    personsService\r\n      .addNewPerson(personObj)\r\n      .then(newPerson => {\r\n        setPersons(persons.concat(newPerson))\r\n        setNewName('');\r\n        setNewNumber('')\r\n        setErrorMessage(`Added ${personObj.name}`)\r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        }, 5000)\r\n      })\r\n      .catch((err) => {\r\n        setNewName('');\r\n        setNewNumber('')\r\n        setErrorMessage(err.response.data.error)\r\n        //console.log(err.response.data.error)\r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        }, 5000)\r\n      })\r\n    \r\n    }\r\n    \r\n  }\r\n\r\n  const deletePerson = (event) => {\r\n    //console.log(event.target.value)\r\n    const person = persons.find(person => {\r\n      //console.log(`personsid: ${person.id}`)\r\n      return person.id.toString() === event.target.value;\r\n      \r\n    })\r\n    //console.log(`person: ${person.name}`)\r\n    const result = window.confirm(`delete ${person.name}?`)\r\n    if (result) {\r\n    personsService\r\n      .deletePerson(event.target.value)\r\n      .then(\r\n       setPersons(persons.filter(person => person.id.toString() !== event.target.value))\r\n      )\r\n    }\r\n    return null;\r\n  }\r\n\r\n  const handleNumberChange = ({target}) => {\r\n    setNewNumber(target.value);\r\n  }\r\n\r\n  const handleFilter = ({target}) => {\r\n    setFilter(target.value.toLowerCase());\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Filter filter={filter} handleChange={handleFilter}/>\r\n      <h3>add a person</h3>\r\n      <Notification message={errorMessage}/><br />\r\n      <PersonForm \r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        newNumber={newNumber}\r\n        handleNumberChange={handleNumberChange}\r\n        addPerson={addPerson}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Results persons={persons} filter={filter} deletePerson={deletePerson}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\n\r\nReactDOM.render(\r\n    <App />,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}